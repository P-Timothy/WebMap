<!DOCTYPE html>
<html>
    <head>
        
        <meta charset="utf-8" />
        <title>Econ Data Visulization</title>
        <meta name="viewport" content='initial-scale=1,maximum-scale=1,user-scalable=no' />
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
        <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.js'></script>
        <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.css' rel='stylesheet' />
        
        
        <style>
            
        body { 
            margin:0; 
            padding:0; 
            }
        #map { 
            position: absolute; 
            height: 90%; 
            width: 100%;
            top: 10%;
            }
        #title { 
            position: relative; 
            width: 100%; 
            height: 20px;
            top: 0;
            background-color:white; 
            opacity: 100%; 
            text-align: center; 
            }
        .map-overlay {
            font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
            position: absolute;
            width: 25%;
            top: 0;
            left: 0;
            padding: 10px;
            }
        .map-overlay .map-overlay-inner {
            background-color: #fff;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
            border-radius: 3px;
            padding: 10px;
            margin-bottom: 10px;
            }
        .map-overlay h2 {
            line-height: 24px;
            display: block;
            margin: 0 0 10px;
            } 
        .map-overlay .legend .bar {
            height: 10px;
            width: 100%;
            background: linear-gradient(to right, #fca107, #7f3121);
            } 
        .map-overlay input {
            background-color: transparent;
            display: inline-block;
            width: 100%;
            position: relative;
            margin: 0;
            cursor: ew-resize;
            }
            
        </style>
        
    </head>
    
    <body>
    
        <div id="map"></div>
    
        <div id='title'>
     		<h3>WebMapping Econ Project</h3>
     		<h4>Author: P. Timothy Young Schragel</h4>
        </div>
        
        <div class="map-overlay top">
            <div class="map-overlay-inner">
                <h2>Manf. Plants Per Year</h2>
                <label id="year"></label>
                <input id="slider" type="range" min="1965" max="1992" step="1" value="1965">
            </div>
            <div class="map-overlay-inner">
                <div id="legend" class="legend">
                    <div class="bar"></div>
                    <div>Year</div>
                </div>
            </div>
        </div>

        <script>
            mapboxgl.accessToken = 'pk.eyJ1IjoicHRpbW15cyIsImEiOiJjbGc1Zmp6ODQwMnRrM2ZvOG5kMDA1aDM3In0.FSlp6F-U5z8ZkTHvHaPI3w'; 
            var map = new mapboxgl.Map({
                container: 'map', // container id
                style: 'mapbox://styles/mapbox/light-v11', // stylesheet location
                // mapbox://styles/ptimmys/clh2c77a7008101pp1tg5ebnx
            });
            
            const years = [
                '1965', '1966', '1967', '1968',
                '1969', '1970', '1971', '1972',
                '1973', '1974', '1975', '1976',
                '1977', '1978', '1979', '1980',
                '1981', '1982', '1983', '1984',
                '1985', '1986', '1987', '1988',
                '1989', '1990', '1991', '1992'
            ]
            
            function filterBy(year) {
                const filters = ['=', 'year', year];
                map.setFilter('manf-year', filters);
                
                document.getElementsById('year').textContent = years[year];
            }
            
            mo.on('load', () => {
                d3.json('EconJsonFile.geojson' ,jsonCallback)
            })
            
            
            
            
            // adding in zoom and rotation                   This sets position to top left
            map.addControl(new mapboxgl.NavigationControl(), 'top-right');
            
            
            
            
            
        </script>
    </body>
</html>